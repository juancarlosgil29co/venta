#!/usr/bin/env php
<?php
/*
|--------------------------------------------------------------------------
| Defining constants
|--------------------------------------------------------------------------
|
| Here we define some constants to be used later in application
*/
define('VENTA_START', microtime());
define('VENTA_ROOT', __DIR__);

/*
|--------------------------------------------------------------------------
| Requiring autoloader
|--------------------------------------------------------------------------
|
| Including autoloader
*/
require __DIR__ . '/bootstrap/autoloader.php';

/*
|--------------------------------------------------------------------------
| Requireing main application class
|--------------------------------------------------------------------------
|
| Including application class initialisation
*/
/** @var \Venta\Application\Interfaces\ApplicationInterface $app */
$app = require __DIR__ . '/bootstrap/application.php';

/*
|--------------------------------------------------------------------------
| Getting kernel class
|--------------------------------------------------------------------------
|
| Kernel class is used to handle application flow
*/
/** @var \Venta\Application\Interfaces\ConsoleKernelInterface $kernel */
$kernel = $app->make(\Venta\Application\Interfaces\ConsoleKernelInterface::class);

/*
|--------------------------------------------------------------------------
| Handling request
|--------------------------------------------------------------------------
|
| This function call will make application run and handle request object
| producing response object
*/
$exitStatus = $kernel->handle();

/*
|--------------------------------------------------------------------------
| Terminate our application
|--------------------------------------------------------------------------
|
| Termination is called on application here
*/
$kernel->terminate($exitStatus);
exit($exitStatus);